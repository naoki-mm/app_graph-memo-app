# PLOTemo

#### グラフ画像のプロット&メモ アプリ

- 画像化されたグラフのデータポイントを効率的に読み取る。
- クラウド上にメモのように保存・一括管理が可能。
- 検索で必要なデータがすぐに見つかり、CSVダウンロードでデータがすぐに使える。

https://user-images.githubusercontent.com/86902324/149649147-c11c41d5-b013-4bbd-8697-e4087ab39b93.mp4

#### URL：https://plot-memo-app.com/

- 「ゲストログイン」 or 「機能を試す」ボタンで登録せずに機能が試せます。
- スマホ対応しています。

## 制作背景

前職 (ハードウェアエンジニア) の時に、設計などで使うためにグラフ画像を読み取る機会多くありました。  
しかし、仕事で使っていた画像読み取りアプリは下記のような使いにくさを感じていました。

- UIの問題で初めての人だと使い方が全くわからい。
- windows専用のデスクトップアプリで異なるデバイスからアクセスできない。
- 一度読み取ったデータを後で確認できない & 再利用できない。
- 読み取ったデータがExcelですぐに使えず、加工して使う必要があった。

以上を踏まえ、`UIを意識`しながら、下記の利便性を組み合わせた`グラフ画像の読み取り効率化`アプリを作成しました。  
`webで利用可能` + `メモ形式で再利用可能` + `検索、CSVダウンロードですぐに使える`

## 使用技術

### フロントエンド

- HTML、CSS、Sass
- MDBootstrap　4.19.1
- Vue.js　2.6.14

### バックエンド

- PHP 7.4.1
- Laravel 6.20.34

### インフラ

- Docker 20.10.7 / docker-compose 1.29.2 (開発環境)
- AWS (EC2, ALB, ACM, S3, RDS, Route53, VPC, IAM)
- MySQL 8.0.26
- nginx 1.20.0

### その他

- Git / GitHub
- VSCode
- Canva (ロゴや図の作成)
- Draw.io (ER図、インフラ構成図の作成)
- Sequel Ace (DBクライアントツール)

## ER図

![PF_ER図](https://user-images.githubusercontent.com/86902324/149616947-75f9de92-8928-4748-9574-9dfd88c2c440.png)

## インフラ構成図

![インフラ構成図](https://user-images.githubusercontent.com/86902324/149628551-1a1baaa2-0ef8-48f8-ab0b-e23a8a156622.png)

## 主な機能

### 新規プロットメモの作成
ドラッグ&ドロップ、軸設定、グラフ読み取り、メモ保存

https://user-images.githubusercontent.com/86902324/149666717-c3a13d01-9bbe-4111-b166-0497f8ec7bbe.mp4


### CSVダウンロード機能 

https://user-images.githubusercontent.com/86902324/149668591-79c2c113-26cc-4016-bae9-4f8a5e000876.mp4


### 検索機能
ソート、お気に入り検索、タグ検索、キーワード検索

https://user-images.githubusercontent.com/86902324/149668458-dae10737-bdd6-4628-a0ae-5107a973104f.mp4


### ゴミ箱機能
ゴミ箱一覧表示、リストア、完全削除

https://user-images.githubusercontent.com/86902324/149668346-cf0371f4-c25d-4541-9b4d-1bca1354f223.mp4

### アカウント設定機能
ユーザー情報変更、退会処理

https://user-images.githubusercontent.com/86902324/149669427-50531378-f27e-4db2-a837-baf0623a3a2c.mp4


## 機能一覧

### ◇ 認証機能
- 新規登録
- ログイン / ログアウト
- ゲストユーザーログイン
  - 全ての操作は可能だが、ユーザー情報変更処理のDB更新は無効化 (条件分岐でリダイレクトしてメッセージを返す)

### ◇ 認可機能
- ログインユーザーと異なるユーザーの情報にアクセスした際に403(権限)エラーレスポンスを返す。

### ◇ アカウント設定機能
- CRUD処理
- プロフィール (画像、名前) 編集 (intervention、imageとGDライブラリ)
- プロフィール画像のプレビュー　(Vue)
- メールアドレス、パスワード編集
- 退会処理と確認のUI (Laravel、 Vue)

### ◇ グラフ画像のプロット & メモ機能
- プロットメモ一覧表示
  - Canvas画像とグラフ画像を重ねて配置 (Sass)
  - ページネーション (Laravel)
  - ツールチップ(マウスホバー時にヒントの表示)
  - タグ機能 (vue-tags-input, Vue)
  - お気に入り機能 (axios, Vue, Laravel)
  
- プロットメモの新規作成 / 編集機能
  - グラフ画像アップロード (Vue, Laravel, axios, Canvas API)
    - ドラッグ&ドロップ or 選択 
    - 画像をCanvasに表示
    - 画像の保持 (非同期通信でサーバーに保存&セッションで名前データの保持)
    - 画像のバリデーション (非同期通信でエラーレスポンスを取得)
    
  - 軸設定機能 (Vue, Canvas API)
    - Canvasのレスポンシブ対応 (Canvasサイズを取得して計算に用いる)
    - x軸、y軸の設定
    - 軸設定の誤操作防止モーダル
    - 設定完了時のチェックマーク
    - クリックイベント毎に異なる表記をCanvasへ描画
    - 軸設定のリセット機能
    
  - プロットデータの読み取り機能 (Vue, Laravel, axios, Canvas API)
    - クリックポイントをCanvasへ描画
    - クリックポイント値を軸設定した値に換算して取得してテキストエリアに表示
    - クリックデータとテキストエリアの表示の双方向バイディング
    - テキストエリアの更新イベントを検知して再描画
    - テキストエリアの値を規則性を持たせ表示 (桁数、カンマ区切り、改行)
    - プロットデータを画像化して、非同期でサーバーへ保存
    - 座標の角度補正 (画像が傾いている場合でも座標の角度を補正する)
    
  - メモ作成機能 (vue-tags-input, Laravel)
    - タイトル、メモ、タグを入力し保存
    - canvasデータとplotデータの保存
    - バリデーション
    - バリデーション後のold値、画像の保持
    - 保存タブのcanvasの誤操作防止モーダル

### ◇ CSVダウンロード機能
- データベースのプロットデータをすぐに使える形に加工

### ◇ メモ検索機能
- 検索結果が見つからなかったことを明示的に表示
- 下記をAND条件の絞り込み (セッションで条件を保持)
  - お気に入り有無
  - タグ名
  - ソート
- ページネーション (コレクションクラスの型のため LengthAwarePaginatorクラス を使用)  
- キーワード検索機能 (スペース区切りで or条件 が設定可能)

### ◇ ゴミ箱機能
- メモをゴミ箱に移動 (論理削除)
- ゴミ箱にあるメモの一覧表示 (論理削除されたメモを表示)
- ゴミ箱が空の状態を明示的に表示
- リストア、完全削除 (物理削除)

### ◇ その他
- パンくずリスト
- サクセス、エラーのトースト通知 (vue-toasted Vue)

## 工夫したところ
