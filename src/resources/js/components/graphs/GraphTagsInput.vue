<template>
    <div>
        <input type="hidden" name="tags" :value="tagsJson">

        <label class="form-label">
            タグ
        </label>
        <vue-tags-input
            v-model="tag"
            :tags="tags"
            :autocomplete-items="filteredItems"
            :add-on-key="[13, 32]"
            @tags-changed="newTags => tags = newTags"
        />
        <small class="grey-text">タグは5個以内としてください。</small>
    </div>
</template>

<script>
import VueTagsInput from '@johmun/vue-tags-input';

export default {
    components: {
        VueTagsInput,
    },

    props: {
        initialTags: {
            type: Array,
            default: [],
        },

        autocompleteItems: {
            type: Array,
            default: [],
        },
    },

    data() {
        return {
            tag: '',
            tags: this.initialTags,
        };
    },
    computed: {
        filteredItems() {
            return this.autocompleteItems.filter(i => {
                return i.text.toLowerCase().indexOf(this.tag.toLowerCase()) !== -1;
            });
        },

        tagsJson() {
            return JSON.stringify(this.tags)
        },
    },

};
</script>
<style lang="css" scoped>
    .vue-tags-input {
        max-width: inherit;
    }
</style>
<style lang="css">
    .vue-tags-input .ti-tag {
        /* bg-color:tribute */
        background-image: radial-gradient(at top right, #B7B6BB 0%, #E8EAE9 100%);
        color: black;
        border-radius: 0.25rem;
        box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%), 0 2px 10px 0 rgb(0 0 0 / 12%);
    }
</style>
